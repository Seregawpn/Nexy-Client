# üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è Sparkle AppCast

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π Sparkle.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
local_server/
‚îú‚îÄ‚îÄ start_server.py          # HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è AppCast
‚îú‚îÄ‚îÄ updates/
‚îÇ   ‚îî‚îÄ‚îÄ appcast.xml         # XML —Ñ–∞–π–ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ packaging
./start_local_server.sh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
cd local_server
python3 start_server.py
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ AppCast
curl http://localhost:8080/updates/appcast.xml

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8080/
```

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### AppCast XML

–§–∞–π–ª `updates/appcast.xml` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö:

- **URL –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: `http://localhost:8080/updates/Nexy-2.5.0.pkg`
- **–í–µ—Ä—Å–∏—è**: `2.5.0` (build `20500`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: HTML –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### PKG —Ñ–∞–π–ª—ã

–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç PKG —Ñ–∞–π–ª—ã –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
- `Nexy-2.5.0.pkg`
- `Nexy-2.5.0-signed.pkg`

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –í Nexy.spec

```python
'SUFeedURL': 'http://localhost:8080/updates/appcast.xml'
```

### –í Makefile

```makefile
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL
```

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AppCast

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ PKG —Ñ–∞–π–ª–∞:

1. –û–±–Ω–æ–≤–∏—Ç–µ `appcast.xml`:
   - –ò–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Ä—Å–∏—é
   - –û–±–Ω–æ–≤–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:

1. –ó–∞–º–µ–Ω–∏—Ç–µ URL –≤ `Nexy.spec`:
   ```python
   'SUFeedURL': 'https://api.yourdomain.com/updates/appcast.xml'
   ```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ PKG –∏ appcast.xml –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞

–°–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Å–æ–ª—å:
```
üì• GET –∑–∞–ø—Ä–æ—Å: /updates/appcast.xml
‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω appcast.xml
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ AppCast

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ XML
curl -s http://localhost:8080/updates/appcast.xml | xmllint --format -

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ PKG
curl -I http://localhost:8080/updates/Nexy-2.5.0.pkg
```

### –ü—Ä–æ–±–ª–µ–º—ã

- **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç**: –ò–∑–º–µ–Ω–∏—Ç–µ PORT –≤ `start_server.py`
- **PKG –Ω–µ –Ω–∞–π–¥–µ–Ω**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- **XML –æ—à–∏–±–∫–∏**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ `appcast.xml`

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Sparkle Documentation](https://sparkle-project.org/documentation/)
- [AppCast XML Format](https://sparkle-project.org/documentation/publishing/#appcast)
- [macOS Code Signing](https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution)
