# üìö Input Processing - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –û–±–∑–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–î–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –º–æ–¥—É–ª—è `input_processing`, –≤–∫–ª—é—á–∞—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —É–ø–∞–∫–æ–≤–∫–µ, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –±—ã—Å—Ç—Ä—ã–µ —á–µ–∫–ª–∏—Å—Ç—ã.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üìñ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- **`INTEGRATION_GUIDE.md`** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª—è —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- **`PACKAGING_AND_CERTIFICATION_GUIDE.md`** - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ø–∞–∫–æ–≤–∫–µ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è macOS
- **`QUICK_CHECKLIST.md`** - –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **`README.md`** - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **`INTEGRATION_GUIDE.md`** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
- **`PACKAGING_AND_CERTIFICATION_GUIDE.md`** - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è macOS —É–ø–∞–∫–æ–≤–∫–∏
- **`QUICK_CHECKLIST.md`** - –ö—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
1. üìñ –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ `INTEGRATION_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. üîç –ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ API –º–µ—Ç–æ–¥—ã
3. ‚ö° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `QUICK_CHECKLIST.md` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### –î–ª—è —É–ø–∞–∫–æ–≤–∫–∏:
1. üì¶ –ò–∑—É—á–∏—Ç–µ `PACKAGING_AND_CERTIFICATION_GUIDE.md` - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è Apple
2. ‚ö° –°–ª–µ–¥—É–π—Ç–µ `QUICK_CHECKLIST.md` - –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏
3. üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ **Python 3.9+**
- ‚úÖ **pynput>=1.7.6** (–¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- ‚úÖ **speechrecognition>=3.10.0** (–¥–ª—è —Ä–µ—á–∏)
- ‚úÖ **pyaudio>=0.2.11** (–¥–ª—è –∞—É–¥–∏–æ)
- ‚úÖ **sounddevice>=0.4.5** (–¥–ª—è –∞—É–¥–∏–æ)
- ‚úÖ **numpy>=1.21.0** (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)

### –î–ª—è —É–ø–∞–∫–æ–≤–∫–∏:
- ‚úÖ **Apple Developer Account** ($99/–≥–æ–¥)
- ‚úÖ **macOS 10.15+** (Catalina –∏–ª–∏ –Ω–æ–≤–µ–µ)
- ‚úÖ **Xcode Command Line Tools**
- ‚úÖ **Homebrew** –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **PyInstaller** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è bundle

## üîß –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞—É–¥–∏–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
brew install portaudio

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install pynput speechrecognition pyaudio sounddevice numpy
```

### 2. –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
from input_processing import KeyboardMonitor, KeyboardConfig, SpeechRecognizer, SpeechConfig

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
keyboard_config = KeyboardConfig(
    key_to_monitor="space",
    short_press_threshold=0.6,
    long_press_threshold=2.0
)

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ—á–∏
speech_config = SpeechConfig(
    language="ru-RU",
    timeout=5.0,
    auto_start=True
)

# –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–æ–≤
keyboard_monitor = KeyboardMonitor(keyboard_config)
speech_recognizer = SpeechRecognizer(speech_config)

# –ó–∞–ø—É—Å–∫
keyboard_monitor.start_monitoring()
await speech_recognizer.start()
```

## üì¶ –ü—Ä–æ—Ü–µ—Å—Å —É–ø–∞–∫–æ–≤–∫–∏

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
brew install portaudio
pip3 install pyinstaller pynput speechrecognition pyaudio sounddevice numpy
```

### 2. –°–±–æ—Ä–∫–∞
```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pyinstaller input_processing.spec --clean --noconfirm
```

### 3. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ
```bash
# –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
codesign --force --sign "Developer ID Application: Your Name" --entitlements entitlements.plist "InputProcessing.app"
```

### 4. –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é
xcrun notarytool submit "InputProcessing.pkg" --apple-id "your-id@example.com" --password "app-password" --team-id "TEAM_ID" --wait
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- üì¶ **–ü–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π PKG –ø–∞–∫–µ—Ç** –≥–æ—Ç–æ–≤—ã–π –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é
- üèõÔ∏è **–ù–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –ø—Ä–æ—à–µ–¥—à–µ–µ –ø—Ä–æ–≤–µ—Ä–∫—É Apple
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–¥** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Gatekeeper
- üöÄ **–ì–æ—Ç–æ–≤–æ–µ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** —Ä–µ—à–µ–Ω–∏–µ

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:
- [Apple Code Signing Guide](https://developer.apple.com/library/archive/documentation/Security/Conceptual/CodeSigningGuide/)
- [Apple Notarization Guide](https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution)
- [pynput Documentation](https://pynput.readthedocs.io/)
- [SpeechRecognition Documentation](https://pypi.org/project/SpeechRecognition/)
- [sounddevice Documentation](https://python-sounddevice.readthedocs.io/)

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏
codesign --verify --verbose "InputProcessing.app"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Gatekeeper
spctl --assess --verbose "InputProcessing.app"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
xcrun stapler validate "InputProcessing.pkg"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É–¥–∏–æ
python3 -c "import sounddevice; print(sounddevice.query_devices())"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
python3 -c "from pynput import keyboard; print('Keyboard OK')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—á–∏
python3 -c "import speech_recognition; print('Speech OK')"
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª—è

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üîë **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–∞–∂–∞—Ç–∏–π –ø—Ä–æ–±–µ–ª–∞
- üé§ **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≥–æ–ª–æ—Å–∞ –≤ —Ç–µ–∫—Å—Ç
- ‚è±Ô∏è **–¢–æ—á–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ** - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞–∂–∞—Ç–∏–π –¥–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
- üîÑ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- üçé **macOS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ macOS —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

### üîß API –º–µ—Ç–æ–¥—ã:
- `KeyboardMonitor` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- `SpeechRecognizer` - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
- `register_callback()` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- `start_monitoring()` / `stop_monitoring()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
- `start()` / `stop()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—á—å—é

### üìä –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:
- **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞:** `PRESS`, `RELEASE`, `SHORT_PRESS`, `LONG_PRESS`
- **–†–µ—á—å:** `STARTED`, `RECOGNIZED`, `ERROR`, `STOPPED`

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ main.py** - –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–≤–æ–¥–∞
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É StateManager** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
3. **–°–≤—è–∑–∞—Ç—å —Å audio_device_manager** - –¥–ª—è –∞—É–¥–∏–æ –∑–∞–ø–∏—Å–∏
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ module_coordinator** - –¥–ª—è –æ–±—â–µ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
5. **–î–æ–±–∞–≤–∏—Ç—å –≤ —É–ø–∞–∫–æ–≤–∫—É** - –≤–∫–ª—é—á–∏—Ç—å –≤ macOS bundle

---

**–ì–æ—Ç–æ–≤–æ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ macOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!** üéâ
