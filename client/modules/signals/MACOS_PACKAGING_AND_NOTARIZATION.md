# üì¶ macOS: –£–ø–∞–∫–æ–≤–∫–∞, –ü–æ–¥–ø–∏—Å—å –∏ –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è (Signals Module)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å –ø—Ä–∏ —É–ø–∞–∫–æ–≤–∫–µ, –ø–æ–¥–ø–∏—Å–∏, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è macOS –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –º–æ–¥—É–ª—è `signals`.

–ö–ª—é—á–µ–≤–∞—è –º—ã—Å–ª—å: —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è `signals` –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã—Ö –ø—Ä–∞–≤ (entitlements), –Ω–æ–≤—ã—Ö –Ω–∞—Ç–∏–≤–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö API. –û–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞ –¥–ª—è PKG‚Äë—É–ø–∞–∫–æ–≤–∫–∏, –ø–æ–¥–ø–∏—Å–∏ (Developer ID) –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## üîé –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–æ–¥—É–ª—å Signals
- –ö–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ (audio/visual cues) –≤ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã.
- –ê—É–¥–∏–æ‚Äë—Å–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ —á–∏—Å—Ç–æ–º Python –∫–∞–∫ PCM (s16le mono, 48 kHz) –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞—É–¥–∏–æ‚Äë–ø–ª–µ–µ—Ä (CoreAudio) —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä.
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–æ–Ω–∫–∏–π –∞–¥–∞–ø—Ç–µ—Ä –∫ —Ç—Ä–µ—é.

–°–ª–µ–¥—Å—Ç–≤–∏–µ: –Ω–µ—Ç –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ CoreAudio, –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ PyObjC/AVFoundation (–≤ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏).

---

## ‚úÖ Entitlements –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (TCC)
- –ù–æ–≤—ã—Ö entitlements –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —É–∂–µ –∏–º–µ—é—â–∏–µ—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
  - Microphone: –¥–ª—è VoiceRecognition (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
  - Screen Recording: –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
  - Accessibility: –¥–ª—è CGEventTap (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞; –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
- Signals –Ω–µ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã TCC –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π –≤ `entitlements.plist`.

–ï—Å–ª–∏ –∫–æ–≥–¥–∞‚Äë–Ω–∏–±—É–¥—å –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω NSSound/AVFoundation (—á–µ—Ä–µ–∑ PyObjC):
- –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ–¥–ø–∏—Å–∏/–ø–∞–∫–µ—Ç–∞. –°–µ–π—á–∞—Å —ç—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —á–∏—Å—Ç—ã–π Python. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.
- `numpy` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ —É—Å–∫–æ—Ä–∏—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). –î–ª—è –ø–æ—Å—Ç–∞–≤–∫–∏ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ: –∫–æ–ª–µ—Å–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–ª—è arm64; –∫–æ–¥ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–∞–≤–µ .app.
- –ù–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è .dylib/.framework ‚Äî –∑–Ω–∞—á–∏—Ç, process –∫–æ–¥‚Äë–ø–æ–¥–ø–∏—Å–∏ –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏.

---

## üßæ –ü–æ–¥–ø–∏—Å—å –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (—à–ø–∞—Ä–≥–∞–ª–∫–∞)
–ù–∏–∂–µ ‚Äî –∫—Ä–∞—Ç–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –æ–±—â–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

1) –°–±–æ—Ä–∫–∞ .app
- –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, py2app/pyinstaller, —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω—É);
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `entitlements.plist` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø—Ä–∞–≤–∞ (mic/screen/accessibility, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º).

2) –ü–æ–¥–ø–∏—Å—å .app (Developer ID Application)
```
codesign \
  --deep --force --options runtime \
  --entitlements entitlements.plist \
  -s "Developer ID Application: <Your Name> (<TEAM_ID>)" \
  "/path/to/Nexy.app"

codesign --verify --deep --strict "/path/to/Nexy.app"
spctl --assess --type execute "/path/to/Nexy.app"
```

3) –ü–æ–¥–ø–∏—Å—å –∏ —Å–±–æ—Ä–∫–∞ PKG
```
productbuild \
  --component "/path/to/Nexy.app" "/Applications" \
  "/path/to/Nexy.pkg"

productsign \
  --sign "Developer ID Installer: <Your Name> (<TEAM_ID>)" \
  "/path/to/Nexy.pkg" "/path/to/Nexy-signed.pkg"
```

4) –ù–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è PKG (notarytool)
```
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—á—ë—Ç–∫—É –≤ Keychain:
# xcrun notarytool store-credentials nexy-notary \
#   --apple-id <APPLE_ID_EMAIL> --team-id <TEAM_ID> --keychain-profile nexy-notary

xcrun notarytool submit "/path/to/Nexy-signed.pkg" \
  --keychain-profile nexy-notary --wait

xcrun stapler staple "/path/to/Nexy-signed.pkg"
```

5) –ü—Ä–æ–≤–µ—Ä–∫–∏
```
spctl --assess --type install "/path/to/Nexy-signed.pkg"
```

---

## üõ°Ô∏è Hardened Runtime
- –í–∫–ª—é—á—ë–Ω —Ñ–ª–∞–≥ `--options runtime` –ø—Ä–∏ `codesign`.
- Signals –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–∞/–ø–ª–∞–≥–∏–Ω–æ–≤/JIT ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –Ω–µ –Ω—É–∂–Ω—ã.

---

## üß™ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ PKG –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π Gatekeeper.
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–∂–∏–¥–∞–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã TCC (–º–∏–∫—Ä–æ—Ñ–æ–Ω/—Å–∫—Ä–∏–Ω) ‚Äî —Ä–æ–≤–Ω–æ –∫–∞–∫ –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Signals.
- –ê—É–¥–∏–æ‚Äë—Å–∏–≥–Ω–∞–ª—ã –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–≤–æ–¥–∞ (—Ç–æ—Ç –∂–µ –ø—É—Ç—å, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–µ–µ—Ä).
- –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è Signals –Ω–µ—Ç.

---

## ‚ùó –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –ù—É–∂–Ω–∞ –ª–∏ PyObjC/AVFoundation –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤? ‚Äî –ù–µ—Ç, –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏. –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥–ø–∏—Å—å/–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –ù—É–∂–Ω–æ –ª–∏ —á—Ç–æ‚Äë—Ç–æ –º–µ–Ω—è—Ç—å –≤ entitlements –∏–∑‚Äë–∑–∞ Signals? ‚Äî –ù–µ—Ç.
- –í–ª–∏—è–µ—Ç –ª–∏ Signals –Ω–∞ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é? ‚Äî –ù–µ—Ç, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

## ‚úÖ –ß–µ–∫‚Äë–ª–∏—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (–¥–ª—è —Ä–µ–≤—å—é)
- [ ] –í –º–æ–¥—É–ª–µ –Ω–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö API/–Ω–∞—Ç–∏–≤–Ω—ã—Ö –ª–∏–± (—Ç–æ–ª—å–∫–æ Python)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–Ω–∞ ‚Äî PCM s16le/48kHz; –±–µ–∑ –Ω–æ–≤—ã—Ö –∞—É–¥–∏–æ–¥—Ä–∞–π–≤–µ—Ä–æ–≤
- [ ] –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Äî —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä (–æ–¥–∏–Ω –¥–µ–≤–∞–π—Å)
- [ ] –ù–µ—Ç –Ω–æ–≤—ã—Ö entitlements, Hardened Runtime –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- [ ] –ü–æ–¥–ø–∏—Å—å .app (Developer ID Application) –∏ .pkg (Developer ID Installer) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ù–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è PKG —É—Å–ø–µ—à–Ω–∞, stapler –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω

---

## üîó –°—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—â–∏–µ –≥–∞–π–¥—ã
- PACKAGING_README.md (–≤ –∫–æ—Ä–Ω–µ)
- PRODUCTION_BUILD_GUIDE.md (–≤ –∫–æ—Ä–Ω–µ)
- client/Docs/GLOBAL_DELIVERY_PLAN.md (—ç—Ç–∞–ø—ã –ø–æ—Å—Ç–∞–≤–∫–∏, Azure/AppCast)
