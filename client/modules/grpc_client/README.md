# gRPC Client Module

–ú–æ–¥—É–ª—å–Ω—ã–π gRPC –∫–ª–∏–µ–Ω—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è Nexy Voice Assistant.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∫–æ–¥
- **Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
- **Health Check** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- **Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ
- **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
- **macOS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ macOS —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
grpc_client/
‚îú‚îÄ‚îÄ core/                    # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ grpc_client.py      # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ retry_manager.py    # –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ health_checker.py   # –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îú‚îÄ‚îÄ connection_manager.py # –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ types.py            # –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ grpc_config.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_grpc_client.py # –¢–µ—Å—Ç—ã –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ macos/                   # macOS —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ entitlements/       # –†–∞–∑—Ä–µ—à–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ info/               # Info.plist
‚îÇ   ‚îú‚îÄ‚îÄ scripts/            # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ packaging/          # –£–ø–∞–∫–æ–≤–∫–∞
‚îî‚îÄ‚îÄ __init__.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –º–æ–¥—É–ª—è
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from grpc_client import create_default_grpc_client

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
client = create_default_grpc_client()

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
await client.connect()

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
result = await client.execute_with_retry(some_operation)

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ
await client.disconnect()
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

```python
from grpc_client import create_grpc_client

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
local_client = create_grpc_client("local")

# Production
prod_client = create_grpc_client("production")

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
test_client = create_grpc_client("test")
```

### –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
from grpc_client import GrpcClient

config = {
    'servers': {
        'custom': {
            'address': '192.168.1.100',
            'port': 50051,
            'use_ssl': True,
            'timeout': 60
        }
    },
    'max_retry_attempts': 5,
    'retry_strategy': 'exponential'
}

client = GrpcClient(config)
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°–µ—Ä–≤–µ—Ä—ã

```python
servers = {
    'local': {
        'address': '127.0.0.1',
        'port': 50051,
        'use_ssl': False,
        'timeout': 30,
        'retry_attempts': 3,
        'retry_delay': 1.0
    },
    'production': {
        'address': '20.151.51.172',
        'port': 50051,
        'use_ssl': False,
        'timeout': 120,
        'retry_attempts': 5,
        'retry_delay': 2.0
    }
}
```

### Retry —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

- `NONE` - –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- `LINEAR` - –ª–∏–Ω–µ–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- `EXPONENTIAL` - —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- `FIBONACCI` - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ —á–∏—Å–ª–∞–º –§–∏–±–æ–Ω–∞—á—á–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

- `DISCONNECTED` - –æ—Ç–∫–ª—é—á–µ–Ω
- `CONNECTING` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- `CONNECTED` - –ø–æ–¥–∫–ª—é—á–µ–Ω
- `RECONNECTING` - –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- `FAILED` - –æ—à–∏–±–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏

```python
metrics = client.get_metrics()
print(f"–í—Å–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: {metrics.total_connections}")
print(f"–£—Å–ø–µ—à–Ω—ã—Ö: {metrics.successful_connections}")
print(f"–ù–µ—É–¥–∞—á–Ω—ã—Ö: {metrics.failed_connections}")
print(f"–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: {metrics.average_response_time}")
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest grpc_client/tests/

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
python -m pytest grpc_client/tests/test_grpc_client.py -v
```

## üçé macOS —Å–±–æ—Ä–∫–∞

```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è macOS
cd grpc_client/macos/scripts
./build.sh

# –†–µ–∑—É–ª—å—Ç–∞—Ç: dist/grpc_client.pkg
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- grpcio
- grpcio-tools
- PyInstaller (–¥–ª—è —Å–±–æ—Ä–∫–∏)
- macOS 10.15+ (–¥–ª—è —Å–±–æ—Ä–∫–∏)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS/SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫ —Ç–∏–ø–∞ "thundering herd"

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- Connection pooling
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ retry —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger('grpc_client')

# –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –¥–ª—è:
# - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–π/–æ—Ç–∫–ª—é—á–µ–Ω–∏–π
# - Retry –ø–æ–ø—ã—Ç–æ–∫
# - Health check —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
# - –û—à–∏–±–æ–∫
```

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ú–æ–¥—É–ª—å –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ Nexy:

```python
from grpc_client import create_default_grpc_client
# state_management —É–¥–∞–ª–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π StateManager –∏–∑ main.py

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
grpc_client = create_default_grpc_client()

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å state management
state_manager = create_default_state_manager(grpc_client=grpc_client)
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. LICENSE —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üë• –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏

Nexy Development Team

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
