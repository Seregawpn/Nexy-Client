#!/usr/bin/env python3
"""
üöÄ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ –ü–†–ï–†–´–í–ê–ù–ò–Ø –†–ï–ß–ò
–ó–∞–ø—É—Å–∫–∞–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
"""

import asyncio
import sys
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
sys.path.append(str(Path(__file__).parent.parent))

async def quick_interrupt_test():
    """–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ä–µ—á–∏"""
    print("üöÄ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ –ü–†–ï–†–´–í–ê–ù–ò–Ø –†–ï–ß–ò")
    print("=" * 50)
    
    print("üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:")
    print("1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ –û–¢–î–ï–õ–¨–ù–û–ú —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:")
    print("   cd server && python grpc_server.py")
    print("")
    print("2. –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å—Ç–∏—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è")
    print("")
    print("3. –¢–µ—Å—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:")
    print("   ‚Ä¢ –°–∫–∞–∂–∏—Ç–µ –¥–ª–∏–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É")
    print("   ‚Ä¢ –î–æ–∂–¥–∏—Ç–µ—Å—å –Ω–∞—á–∞–ª–∞ —Ä–µ—á–∏")
    print("   ‚Ä¢ –ù–ê–ñ–ú–ò–¢–ï –ü–†–û–ë–ï–õ –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è")
    print("   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—É—é –æ—Å—Ç–∞–Ω–æ–≤–∫—É")
    print("")
    print("4. –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:")
    print("   ‚úÖ –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è < 50ms")
    print("   ‚úÖ –†–µ—á—å –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å –ú–ì–ù–û–í–ï–ù–ù–û")
    print("   ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–ª–æ IDLE")
    print("   ‚úÖ –ë—É—Ñ–µ—Ä—ã –æ—á–∏—â–µ–Ω—ã")
    print("")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    try:
        from main import main as run_assistant
        print("‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã")
        print("üöÄ –ó–∞–ø—É—Å–∫–∞—é –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...")
        print("")
        print("üí° –ù–ê–ñ–ú–ò–¢–ï –ü–†–û–ë–ï–õ –í–û –í–†–ï–ú–Ø –†–ï–ß–ò –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø!")
        print("")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
        await run_assistant()
        
    except ImportError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {e}")
        print("üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø–∞–ø–∫–µ client")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")

if __name__ == "__main__":
    try:
        asyncio.run(quick_interrupt_test())
    except KeyboardInterrupt:
        print("\nüëã –¢–µ—Å—Ç –ø—Ä–µ—Ä–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"\n‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
        print("üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏")
