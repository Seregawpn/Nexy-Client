# üéµ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FLAC –¥–ª—è macOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## ‚úÖ –°—Ç–∞—Ç—É—Å: FLAC –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### **–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
- **–°–∏—Å—Ç–µ–º–Ω—ã–π FLAC**: 1.5.0 (—á–µ—Ä–µ–∑ Homebrew)
- **Python pydub**: 0.25.1
- **FFmpeg**: 7.1.1 (–¥–ª—è –∞—É–¥–∏–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∞—É–¥–∏–æ —Ñ–æ—Ä–º–∞—Ç—ã:**
- ‚úÖ **WAV** - –±–∞–∑–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **MP3** - —Å–∂–∞—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **FLAC** - –±–µ–∑–ø–æ—Ç–µ—Ä—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ (80.6% —Å–∂–∞—Ç–∏–µ!)
- ‚úÖ **OGG** - –æ—Ç–∫—Ä—ã—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚ùå **M4A** - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–¥–µ–∫–æ–≤

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FLAC –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### **1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ –≤ FLAC:**
```python
from pydub import AudioSegment

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—É–¥–∏–æ —Ñ–∞–π–ª
audio = AudioSegment.from_wav("input.wav")

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ FLAC
audio.export("output.flac", format="flac")
```

### **2. –°–æ–∑–¥–∞–Ω–∏–µ FLAC –∏–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:**
```python
import sounddevice as sd
import numpy as np
from pydub import AudioSegment

# –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∞—É–¥–∏–æ
duration = 5  # —Å–µ–∫—É–Ω–¥—ã
sample_rate = 44100
audio_data = sd.rec(int(duration * sample_rate), 
                   samplerate=sample_rate, 
                   channels=1)

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ FLAC
audio_segment = AudioSegment(
    audio_data.tobytes(), 
    frame_rate=sample_rate,
    sample_width=audio_data.dtype.itemsize, 
    channels=1
)

audio_segment.export("recording.flac", format="flac")
```

### **3. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ FLAC:**
```python
from pydub import AudioSegment
import sounddevice as sd

# –ó–∞–≥—Ä—É–∂–∞–µ–º FLAC —Ñ–∞–π–ª
audio = AudioSegment.from_file("audio.flac", format="flac")

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ numpy array –¥–ª—è sounddevice
samples = np.array(audio.get_array_of_samples())
sd.play(samples, audio.frame_rate)
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º:**
- **FLAC binary**: `/opt/homebrew/bin/flac`
- **FFmpeg**: `/opt/homebrew/bin/ffmpeg`
- **Python packages**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Ç–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **WAV ‚Üí FLAC**: 80.6% —Å–∂–∞—Ç–∏–µ
- **–í—Ä–µ–º—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**: ~100ms –¥–ª—è 1 —Å–µ–∫—É–Ω–¥—ã –∞—É–¥–∏–æ
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –ë–µ–∑–ø–æ—Ç–µ—Ä—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ

---

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ .app —Ñ–∞–π–ª

### **–í–∫–ª—é—á–µ–Ω–æ –≤ PyInstaller spec:**
```python
# FLAC support files
("/opt/homebrew/bin/flac", "."),  # FLAC binary
```

### **–í–∫–ª—é—á–µ–Ω–æ –≤ hiddenimports:**
```python
"pydub",
"pydub.audio_segment", 
"pydub.utils",
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞:**
```bash
cd client
python test_flac.py
```

### **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø FLAC
==================================================
–°–∏—Å—Ç–µ–º–Ω—ã–π FLAC: ‚úÖ –ü–†–û–ô–î–ï–ù
Python FLAC –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: ‚úÖ –ü–†–û–ô–î–ï–ù
–ê—É–¥–∏–æ —Ñ–æ—Ä–º–∞—Ç—ã: ‚úÖ –ü–†–û–ô–î–ï–ù
FLAC –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: ‚úÖ –ü–†–û–ô–î–ï–ù

üìà –ò—Ç–æ–≥–æ: 4/4 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã! FLAC –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.
```

---

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **1. FLAC –Ω–µ –Ω–∞–π–¥–µ–Ω:**
```bash
brew install flac
```

### **2. pydub –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è:**
```bash
pip3 install pydub
```

### **3. FFmpeg –æ—à–∏–±–∫–∏:**
```bash
brew install ffmpeg
```

### **4. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
```bash
chmod +x /opt/homebrew/bin/flac
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **1. –ê—É–¥–∏–æ –∫–∞—á–µ—Å—Ç–≤–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FLAC –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MP3 –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
- WAV –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### **2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- FLAC –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ

### **3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ FLAC:**
```bash
brew upgrade flac
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pydub:**
```bash
pip3 install --upgrade pydub
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ FFmpeg:**
```bash
brew upgrade ffmpeg
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å FLAC:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python test_flac.py`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏: `flac --version`, `ffmpeg -version`
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞ –∫ `/opt/homebrew/bin/`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è PATH

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ FLAC –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
1. ‚úÖ **–≠–¢–ê–ü 1 –∑–∞–≤–µ—Ä—à–µ–Ω** - FLAC —Ä–∞–±–æ—Ç–∞–µ—Ç
2. üîÑ **–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≠–¢–ê–ü–£ 2** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
3. üöÄ **–ì–æ—Ç–æ–≤–∏–º—Å—è –∫ —Å–±–æ—Ä–∫–µ** - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

**FLAC –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!** üéâ
