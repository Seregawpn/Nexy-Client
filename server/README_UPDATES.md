# üîÑ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è Nexy Server

## üìã –û–±–∑–æ—Ä

–°–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π Sparkle, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
server/
‚îú‚îÄ‚îÄ main.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ update_server.py           # –°–µ—Ä–≤–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ grpc_server.py            # gRPC —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ updates/                  # –§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ appcast.xml           # AppCast XML (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª!)
‚îÇ   ‚îú‚îÄ‚îÄ downloads/            # DMG —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Nexy_1.71.0.dmg
‚îÇ   ‚îî‚îÄ‚îÄ keys/                 # –ö–ª—é—á–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏
‚îÇ       ‚îú‚îÄ‚îÄ ed25519_private.pem
‚îÇ       ‚îî‚îÄ‚îÄ ed25519_public.pem
‚îî‚îÄ‚îÄ setup_server.sh           # –°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd server
chmod +x setup_server.sh
./setup_server.sh
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python3 main.py
```

## üì° Endpoints

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ endpoints:

- **HTTP —Å–µ—Ä–≤–µ—Ä** (–ø–æ—Ä—Ç 80):
  - `http://localhost:80/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  - `http://localhost:80/health` - Health check
  - `http://localhost:80/status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

- **–°–µ—Ä–≤–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π** (–ø–æ—Ä—Ç 8080):
  - `http://localhost:8080/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
  - `http://localhost:8080/appcast.xml` - AppCast XML
  - `http://localhost:8080/downloads/` - DMG —Ñ–∞–π–ª—ã
  - `http://localhost:8080/health` - Health check –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
  - `http://localhost:8080/api/versions` - API –≤–µ—Ä—Å–∏–π

- **gRPC —Å–µ—Ä–≤–µ—Ä** (–ø–æ—Ä—Ç 50051):
  - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AppCast XML
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `updates/appcast.xml` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π:

```xml
<item>
    <title>Nexy 1.72.0</title>
    <description>
        <![CDATA[
        <h2>–ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –≤–µ—Ä—Å–∏–∏ 1.72.0:</h2>
        <ul>
            <li>–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</li>
            <li>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫</li>
        </ul>
        ]]>
    </description>
    <pubDate>Mon, 08 Sep 2025 18:00:00 +0000</pubDate>
    <enclosure url="http://localhost:8080/downloads/Nexy_1.72.0.dmg"
               sparkle:version="1.72.0"
               sparkle:shortVersionString="1.72.0"
               length="10485760"
               type="application/octet-stream"
               sparkle:edSignature="SIGNATURE_HERE"/>
</item>
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö DMG —Ñ–∞–π–ª–æ–≤
1. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π DMG —Ñ–∞–π–ª –≤ `updates/downloads/`
2. –û–±–Ω–æ–≤–∏—Ç–µ AppCast XML —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **ED25519 –∫–ª—é—á–∏** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **HTTPS** —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏** —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –æ:
- –ó–∞–ø—É—Å–∫–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ó–∞–ø—Ä–æ—Å–∞—Ö –∫ AppCast XML
- –ó–∞–≥—Ä—É–∑–∫–µ DMG —Ñ–∞–π–ª–æ–≤
- –û—à–∏–±–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:80/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
curl http://localhost:8080/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ AppCast XML
curl http://localhost:8080/appcast.xml
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `python3 main.py`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º URL: `http://localhost:8080/appcast.xml`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- **AppCast XML** - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, –ª–µ–≥–∫–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è
- **DMG —Ñ–∞–π–ª—ã** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- **–ö–ª—é—á–∏** - —Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–í–µ—Ä—Å–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å–Ω–æ–≤–∞

---

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

