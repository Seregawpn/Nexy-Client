# üöÄ –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –î–ï–ü–õ–û–Æ –°–ï–†–í–ï–†–ê –ù–ê AZURE

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 1 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

---

## üìã **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø**

### **üîê GitHub Secrets (–ö–†–ò–¢–ò–ß–ù–û):**
–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `https://github.com/Seregawpn/Nexy_server/settings/secrets/actions`:
- `AZURE_CREDENTIALS` - Service Principal JSON
- `AZURE_SUBSCRIPTION_ID` - ID –ø–æ–¥–ø–∏—Å–∫–∏ Azure
- `AZURE_TENANT_ID` - ID —Ç–µ–Ω–∞–Ω—Ç–∞ Azure

### **üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):**
```
nexy_new/server/          ‚Üê –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îú‚îÄ‚îÄ main.py              ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ modules/             ‚Üê –í—Å–µ –º–æ–¥—É–ª–∏ (9 —à—Ç—É–∫)
‚îú‚îÄ‚îÄ integrations/        ‚Üê –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ config/              ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt     ‚Üê –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .github/workflows/   ‚Üê GitHub Actions
‚îî‚îÄ‚îÄ Docs/                ‚Üê –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîÑ **–ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–ï–ü–õ–û–Ø**

### **–®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê (1-2 –º–∏–Ω—É—Ç—ã)**

**1.1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
cd /Users/sergiyzasorin/Library/Mobile\ Documents/com~apple~CloudDocs/Development/Nexy/server
git status
```

**1.2. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
```bash
cd /tmp
rm -rf nexy_server_temp  # –û—á–∏—Å—Ç–∏—Ç—å, –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

### **–®–ê–ì 2: –ö–õ–û–ù–ò–†–û–í–ê–ù–ò–ï –†–ï–ü–û–ó–ò–¢–û–†–ò–Ø (30 —Å–µ–∫—É–Ω–¥)**

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Seregawpn/Nexy_server.git nexy_server_temp
cd nexy_server_temp
```

### **–®–ê–ì 3: –û–ß–ò–°–¢–ö–ê –ò –ö–û–ü–ò–†–û–í–ê–ù–ò–ï (1 –º–∏–Ω—É—Ç–∞)**

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
rm -rf * .* 2>/dev/null || true

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã —Å–µ—Ä–≤–µ—Ä–∞
cp -r /Users/sergiyzasorin/Library/Mobile\ Documents/com~apple~CloudDocs/Development/Nexy/server/* .
cp -r /Users/sergiyzasorin/Library/Mobile\ Documents/com~apple~CloudDocs/Development/Nexy/server/.* . 2>/dev/null || true
```

### **–®–ê–ì 4: –ù–ê–°–¢–†–û–ô–ö–ê GIT (30 —Å–µ–∫—É–Ω–¥)**

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å git
git init

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –î–æ–±–∞–≤–∏—Ç—å remote
git remote add origin https://github.com/Seregawpn/Nexy_server.git
```

### **–®–ê–ì 5: COMMIT –ò PUSH (1 –º–∏–Ω—É—Ç–∞)**

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã
git add .

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: Commit —Å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
git commit -m "üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞: [–û–ü–ò–°–ê–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–ô]

- –î–∞—Ç–∞: $(date '+%d.%m.%Y %H:%M')
- –ò–∑–º–µ–Ω–µ–Ω–∏—è: [–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]
- –ú–æ–¥—É–ª–∏: [—Å–ø–∏—Å–æ–∫ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –º–æ–¥—É–ª–µ–π]"

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: Force push
git push origin main --force
```

### **–®–ê–ì 6: –û–ß–ò–°–¢–ö–ê (10 —Å–µ–∫—É–Ω–¥)**

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /tmp
rm -rf nexy_server_temp
```

---

## ‚è±Ô∏è **–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô (2-3 –º–∏–Ω—É—Ç—ã)**

–ü–æ—Å–ª–µ push –≤ GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

### **ü§ñ GitHub Actions –ø—Ä–æ—Ü–µ—Å—Å:**
1. **–¢—Ä–∏–≥–≥–µ—Ä:** Push –≤ main –≤–µ—Ç–∫—É
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** GitHub Secrets + Azure Service Principal
3. **–ö–æ–º–∞–Ω–¥–∞:** `az vm run-command invoke` ‚Üí `/home/azureuser/update-server.sh`
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** `git pull` + `pip install` + `systemctl restart`
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞:** Health checks

### **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è:**
- **GitHub Actions:** `https://github.com/Seregawpn/Nexy_server/actions`
- **Health check:** `http://20.151.51.172/health`
- **Status API:** `http://20.151.51.172/status`

---

## ‚úÖ **–ü–†–û–í–ï–†–ö–ê –£–°–ü–ï–®–ù–û–ì–û –î–ï–ü–õ–û–Ø**

### **1. Health Check:**
```bash
curl http://20.151.51.172/health
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "OK"
```

### **2. Status API:**
```bash
curl http://20.151.51.172/status
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–µ—Ä–≤–∏—Å–µ
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å
az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "
    cd /home/azureuser/voice-assistant
    git log --oneline -1
  "
```

---

## ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ú–û–ú–ï–ù–¢–´**

### **üö® –ù–ï –î–ï–õ–ê–ô–¢–ï:**
- ‚ùå –ù–µ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- ‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ—á–∏—â–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π push (—Ç–æ–ª—å–∫–æ --force)
- ‚ùå –ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### **‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**
- ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/tmp` –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ commit —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ health endpoint –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

## üîß **–£–°–¢–†–ê–ù–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú**

### **–ü—Ä–æ–±–ª–µ–º–∞: GitHub Actions –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GitHub Secrets –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ workflow —Ñ–∞–π–ª –≤ `.github/workflows/`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤ workflow

### **–ü—Ä–æ–±–ª–µ–º–∞: –î–µ–ø–ª–æ–π –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è**
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ GitHub Actions
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "/home/azureuser/update-server.sh"
```

### **–ü—Ä–æ–±–ª–µ–º–∞: Health check –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç**
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –≤—Ä—É—á–Ω—É—é

---

## üìä **–í–†–ï–ú–ï–ù–ù–´–ï –†–ê–ú–ö–ò**

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-------|----------|
| –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | 1-2 –º–∏–Ω | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | 30 —Å–µ–∫ | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è |
| –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | 1 –º–∏–Ω | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ |
| Git –æ–ø–µ—Ä–∞—Ü–∏–∏ | 1 –º–∏–Ω | Commit –∏ push |
| –û—á–∏—Å—Ç–∫–∞ | 10 —Å–µ–∫ | –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ |
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** | **2-3 –º–∏–Ω** | **GitHub Actions ‚Üí Azure** |
| **–ò–¢–û–ì–û** | **5-7 –º–∏–Ω** | **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª** |

---

## üéØ **–ü–†–ò–ú–ï–†–´ COMMIT –°–û–û–ë–©–ï–ù–ò–ô**

### **‚úÖ –•–û–†–û–®–ò–ï –ü–†–ò–ú–ï–†–´:**
```bash
git commit -m "üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ text_processing

- –î–∞—Ç–∞: 01.10.2025 16:45
- –ò–∑–º–µ–Ω–µ–Ω–∏—è: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
- –ú–æ–¥—É–ª–∏: text_processing, integrations"

git commit -m "üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

- –î–∞—Ç–∞: 01.10.2025 17:20
- –ò–∑–º–µ–Ω–µ–Ω–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω Azure TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- –ú–æ–¥—É–ª–∏: audio_generation, providers"
```

### **‚ùå –ü–õ–û–•–ò–ï –ü–†–ò–ú–ï–†–´:**
```bash
git commit -m "update"
git commit -m "fix"
git commit -m "changes"
```

---

## üöÄ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

**–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞.**

**–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑–¥–µ–ª—É "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º".**

---

**üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `Docs/` –ø–∞–ø–∫–µ  
**üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `https://github.com/Seregawpn/Nexy_server`  
**üåê –°–µ—Ä–≤–µ—Ä:** `http://20.151.51.172`
