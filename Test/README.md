# ü§ñ Gemini Live API –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç

## üéØ **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**

–≠—Ç–æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Google Gemini Live API** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç:
- üì∏ **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —ç–∫—Ä–∞–Ω–∞** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîç **–í—ã–ø–æ–ª–Ω—è—Ç—å –æ–Ω–ª–∞–π–Ω –ø–æ–∏—Å–∫** —á–µ—Ä–µ–∑ Google Search
- üí¨ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–ø—Ä–æ—Å–∞

## üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**

### **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
pip install -r requirements.txt
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞**
```bash
export GEMINI_API_KEY="your_api_key_here"
```

### **3. –ó–∞–ø—É—Å–∫**
```bash
./run.sh
# –∏–ª–∏
python main.py
```

## üîß **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞:**
- **"–Ω–æ–≤–æ—Å—Ç–∏" –∏–ª–∏ "–ø–æ–∏—Å–∫"** ‚Üí Google Search (–±–µ–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞)
- **–û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** ‚Üí –°–∫—Ä–∏–Ω—à–æ—Ç + –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
"—Ä–∞—Å—Å–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏"           ‚Üí Google Search
"—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–∏—Ä–µ —Å–µ–≥–æ–¥–Ω—è"         ‚Üí Google Search
"–æ–ø–∏—à–∏ —á—Ç–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ"                  ‚Üí –°–∫—Ä–∏–Ω—à–æ—Ç + –∞–Ω–∞–ª–∏–∑
"—á—Ç–æ —è –≤–∏–∂—É –Ω–∞ –º–æ–Ω–∏—Ç–æ—Ä–µ"               ‚Üí –°–∫—Ä–∏–Ω—à–æ—Ç + –∞–Ω–∞–ª–∏–∑
```

## üìã **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```
Test/
‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ run.sh              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ README.md           # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ STATUS.md           # –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
```

## üîç **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

### **Google Search:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- –ü–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### **–ê–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Gemini API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
- Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ‚ö†Ô∏è **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**

- **Python 3.8+**
- **GEMINI_API_KEY** - API –∫–ª—é—á Google Gemini
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** `google-genai`, `pillow`, `mss`

## üö® **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫**

### **–û—à–∏–±–∫–∞ "GEMINI_API_KEY not found":**
```bash
export GEMINI_API_KEY="your_api_key_here"
```

### **–û—à–∏–±–∫–∞ "Object not JSON serializable":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `raw_bytes` –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ `types.Part.from_bytes()`

### **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã: ~100-500ms
- API –≤—ã–∑–æ–≤—ã: ~1-3 —Å–µ–∫—É–Ω–¥—ã
- Google Search: ~2-5 —Å–µ–∫—É–Ω–¥

## üîÆ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**

- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** (Calendar, Gmail, Drive API)
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å** (–∞—É–¥–∏–æ, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** (Slack, Discord, Telegram, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

## üîå **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã**

### **1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
```python
from google import genai
from google.genai import types

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
config = types.LiveConnectConfig(
    response_modalities=["TEXT"],
    tools=[types.Tool(google_search=types.GoogleSearch())]
)

# –ö–ª–∏–µ–Ω—Ç
client = genai.Client(
    http_options={"api_version": "v1beta"},
    api_key=os.environ.get("GEMINI_API_KEY"),
)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
async with client.aio.live.connect(model="models/gemini-2.5-flash-live-preview", config=config) as session:
    # –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install google-genai pillow mss

# 2. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export GEMINI_API_KEY="your_key"

# 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
from main import ScreenAssistant

assistant = ScreenAssistant()
# –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
```

### **3. –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

#### **Flask Web API:**
```python
from flask import Flask, request, jsonify
import asyncio
from main import ScreenAssistant

app = Flask(__name__)

@app.route('/analyze', methods=['POST'])
def analyze():
    data = request.json
    query = data.get('query', '')
    
    result = asyncio.run(analyze_with_gemini(query))
    return jsonify({'result': result})

async def analyze_with_gemini(query):
    assistant = ScreenAssistant()
    await assistant.connect()
    await assistant.send_message_with_screenshot(query)
    response = await assistant.receive_response()
    await assistant.close()
    return response
```

#### **Discord Bot:**
```python
import discord
from discord.ext import commands
from main import ScreenAssistant

bot = commands.Bot(command_prefix='!', intents=discord.Intents.default())

@bot.command()
async def analyze(ctx, *, query):
    await ctx.send("üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...")
    assistant = ScreenAssistant()
    await assistant.connect()
    await assistant.send_message_with_screenshot(query)
    response = await assistant.receive_response()
    await ctx.send(f"üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:\n{response}")
    await assistant.close()

bot.run('YOUR_TOKEN')
```

#### **CLI Tool:**
```python
#!/usr/bin/env python3
import asyncio
from main import ScreenAssistant

async def main():
    query = input("–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å: ")
    assistant = ScreenAssistant()
    await assistant.connect()
    await assistant.send_message_with_screenshot(query)
    response = await assistant.receive_response()
    print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {response}")
    await assistant.close()

if __name__ == "__main__":
    asyncio.run(main())
```

### **4. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
tools=[
    types.Tool(google_search=types.GoogleSearch()),
    types.Tool(
        function_declarations=[
            types.FunctionDeclaration(
                name="custom_function",
                description="–û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏",
                parameters=types.Schema(
                    type=types.Type.OBJECT,
                    properties={
                        "param1": types.Schema(type=types.Type.STRING)
                    }
                )
            )
        ]
    )
]
```

### **5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback**
```python
class GeminiErrorHandler:
    @staticmethod
    async def send_with_fallback(session, query, screenshot=None):
        try:
            if screenshot:
                # –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç + —Ç–µ–∫—Å—Ç
                await session.send_client_content(...)
            else:
                # Fallback –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
                await session.send_client_content(...)
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞: {e}")
            # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
            await session.send_client_content(...)
```

### **6. –ß–µ–∫-–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
- [ ] **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (`google-genai`, `pillow`, `mss`)
- [ ] **–ù–∞—Å—Ç—Ä–æ–µ–Ω API –∫–ª—é—á** (`GEMINI_API_KEY`)
- [ ] **–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –±–∞–∑–æ–≤—ã–π –∫–æ–¥** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] **–î–æ–±–∞–≤–ª–µ–Ω –∑–∞—Ö–≤–∞—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
- [ ] **–î–æ–±–∞–≤–ª–µ–Ω –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç**

### **7. –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è**

| –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|
| `GEMINI_API_KEY not found` | `export GEMINI_API_KEY="your_key"` |
| `Object not JSON serializable` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `raw_bytes`, –Ω–µ `base64` |
| `Model not found` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `models/gemini-2.5-flash-live-preview` |
| `Invalid input` | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç `types.Content` |

## üìö **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**

–ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ñ–∞–π–ª–µ `STATUS.md`.

## üéâ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–í–∞—à –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç–∫—Ä–∞–Ω–∞ –∏ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏!
