# üì¶ –ü–û–õ–ù–´–ô –ü–õ–ê–ù –£–ü–ê–ö–û–í–ö–ò NEXY AI VOICE ASSISTANT

## üéØ –û–ë–ó–û–†

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, —É–ø–∞–∫–æ–≤–∫–µ, –ø–æ–¥–ø–∏—Å–∞–Ω–∏—é –∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ macOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Nexy AI Voice Assistant –≤ PKG —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫.

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏)
4. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PyInstaller](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-pyinstaller)
6. [–°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏](#—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–∫—Ä–∏–ø—Ç–æ–≤-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
7. [–ü—Ä–æ—Ü–µ—Å—Å —É–ø–∞–∫–æ–≤–∫–∏](#–ø—Ä–æ—Ü–µ—Å—Å-—É–ø–∞–∫–æ–≤–∫–∏)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ](#—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ)
10. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

---

## üîß –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **macOS:** 10.15+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 12.0+)
- **Xcode Command Line Tools:** `xcode-select --install`
- **Python:** 3.9+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.9.6)
- **Homebrew:** –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Homebrew (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PyInstaller
pip3 install pyinstaller

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
brew install switchaudio-osx sparkle
```

---

## üîê –ù–ê–°–¢–†–û–ô–ö–ê –°–ï–†–¢–ò–§–ò–ö–ê–¢–û–í

### 1. Apple Developer Account
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ê–∫—Ç–∏–≤–Ω—ã–π Apple Developer Account ($99/–≥–æ–¥)
- **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:** Developer ID Application + Developer ID Installer

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
```bash
# –í Keychain Access:
# 1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç "Developer ID Application"
# 2. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç "Developer ID Installer"
# 3. –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Developer ID Application
security find-identity -v -p codesigning | grep "Developer ID Application"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Developer ID Installer  
security find-identity -v -p codesigning | grep "Developer ID Installer"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
1) ABC1234567890ABCDEF1234567890ABCDEF1234 "Developer ID Application: Your Name (TEAM_ID)"
2) FED0987654321FEDCBA0987654321FEDCBA0987 "Developer ID Installer: Your Name (TEAM_ID)"
```

---

## üîê –ù–ê–°–¢–†–û–ô–ö–ê –ù–û–¢–ê–†–ò–ó–ê–¶–ò–ò

### 1. App-Specific Password
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ [appleid.apple.com](https://appleid.apple.com)
2. –í–æ–π—Ç–∏ –≤ Apple ID
3. –í —Ä–∞–∑–¥–µ–ª–µ "Security" ‚Üí "App-Specific Passwords"
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è "Notarization"
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å (–ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `client/notarize_config.sh`:
```bash
#!/bin/bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ Nexy AI Voice Assistant

# Apple ID –¥–ª—è –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
export APPLE_ID="your-email@example.com"

# App-Specific Password (—Å–æ–∑–¥–∞–π—Ç–µ –≤ appleid.apple.com)
export APP_PASSWORD="abcd-efgh-ijkl-mnop"

# Team ID (–Ω–∞–π—Ç–∏ –≤ Apple Developer Portal)
export TEAM_ID="YOUR_TEAM_ID"

# Bundle ID
export BUNDLE_ID="com.sergiyzasorin.nexy.voiceassistant"
```

### 3. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Apple
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Apple Notary Service
xcrun notarytool history \
    --apple-id "$APPLE_ID" \
    --password "$APP_PASSWORD" \
    --team-id "$TEAM_ID"
```

---

## üì¶ –ü–û–î–ì–û–¢–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô

### 1. Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–§–∞–π–ª `client/requirements.txt`:
```txt
# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
grpcio==1.74.0
grpcio-tools==1.74.0
protobuf==4.25.1
aiohttp==3.9.1
rumps==0.3.0
pystray==0.19.4
pynput==1.7.6
sounddevice==0.4.6
speechrecognition==3.10.0
pydub==0.25.1
numpy==1.24.3
Pillow==10.1.0
pyyaml==6.0.1

# PyObjC —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –¥–ª—è macOS
pyobjc-core==9.2
pyobjc-framework-Cocoa==9.2
pyobjc-framework-CoreAudio==9.2
pyobjc-framework-CoreFoundation==9.2
pyobjc-framework-AVFoundation==9.2
pyobjc-framework-Quartz==9.2
pyobjc-framework-ApplicationServices==9.2
pyobjc-framework-SystemConfiguration==9.2
```

### 2. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# SwitchAudioSource –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
brew install switchaudio-osx

# Sparkle Framework –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
brew install sparkle
```

### 3. FLAC –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FLAC 1.5.0
brew install flac

# –ó–∞–º–µ–Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ FLAC –≤ speech_recognition
# (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ update_flac.sh)
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø PYINSTALLER

### 1. –û—Å–Ω–æ–≤–Ω–æ–π spec —Ñ–∞–π–ª
–§–∞–π–ª `client/nexy.spec`:
```python
# -*- mode: python ; coding: utf-8 -*-

import os
import sys
from pathlib import Path

# –ò–º–ø–æ—Ä—Ç—ã PyInstaller (–¥–ª—è –≤–µ—Ä—Å–∏–∏ 6.x)
from PyInstaller.building.api import EXE, PYZ
from PyInstaller.building.build_main import Analysis
from PyInstaller.building.osx import BUNDLE

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π
client_dir = Path('.').resolve()
assets_dir = client_dir / 'assets'
pkg_root = client_dir / 'pkg_root'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Sparkle Framework
sparkle_framework = "/usr/local/lib/Sparkle.framework"

# –°–æ–∑–¥–∞–Ω–∏–µ Info.plist —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Sparkle
info_plist = {
    'CFBundleName': 'Nexy',
    'CFBundleDisplayName': 'Nexy AI Voice Assistant',
    'CFBundleIdentifier': 'com.sergiyzasorin.nexy.voiceassistant',
    'CFBundleVersion': '1.71.0',
    'CFBundleShortVersionString': '1.71.0',
    'CFBundlePackageType': 'APPL',
    'CFBundleSignature': '????',
    'CFBundleExecutable': 'Nexy',
    'CFBundleIconFile': 'app.icns',
    
    # TCC —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
    'NSMicrophoneUsageDescription': 'Nexy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥',
    'NSCameraUsageDescription': 'Nexy –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–º–µ—Ä—É –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π',
    'NSScreenCaptureUsageDescription': 'Nexy –º–æ–∂–µ—Ç –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —ç–∫—Ä–∞–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞',
    'NSAppleEventsUsageDescription': 'Nexy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Apple Events –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á',
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    'LSUIElement': True,  # –°–∫—Ä—ã—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –≤ —Ç—Ä–µ–µ)
    'NSBackgroundOnly': False,  # –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ, –Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Ñ–æ–Ω–µ
    'NSSupportsAutomaticTermination': False,  # –ù–µ –∑–∞–≤–µ—Ä—à–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    'NSSupportsSuddenTermination': False,  # –ù–µ –∑–∞–≤–µ—Ä—à–∞—Ç—å –≤–Ω–µ–∑–∞–ø–Ω–æ
    
    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    'LSEnvironment': {
        'PYTHONPATH': '/Applications/Nexy.app/Contents/Resources'
    }
}

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Sparkle –≤ Info.plist (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
if os.path.exists(sparkle_framework):
    info_plist.update({
        'SUFeedURL': 'http://localhost:8080/appcast.xml',
        'SUPublicEDKey': 'yixFT+HhjLehYH6sT8riFb1etq/hpXFWNqiGkZOBHjE=',
        'SUEnableAutomaticChecks': True,
        'SUAllowsAutomaticUpdates': True,
        'SUAutomaticallyUpdate': True
    })
    print("‚úÖ Sparkle –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Info.plist")

# –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
a = Analysis(
    ['main.py'],
    pathex=[str(client_dir)],
    binaries=[],
    datas=[
        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
        (str(assets_dir / 'icons' / 'app.icns'), 'assets/icons/'),
        (str(assets_dir / 'icons' / 'active.png'), 'assets/icons/'),
        (str(assets_dir / 'icons' / 'active@2x.png'), 'assets/icons/'),
        (str(assets_dir / 'icons' / 'off.png'), 'assets/icons/'),
        (str(assets_dir / 'icons' / 'off@2x.png'), 'assets/icons/'),
        (str(assets_dir / 'logo.icns'), 'assets/'),
        
        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        ('config/app_config.yaml', 'config/'),
        ('config/logging_config.yaml', 'config/'),
        
        # LaunchAgent —Ñ–∞–π–ª—ã
        (str(pkg_root / 'Library' / 'LaunchAgents' / 'com.sergiyzasorin.nexy.voiceassistant.plist'), 'Resources/'),
        (str(pkg_root / 'Library' / 'LaunchAgents' / 'nexy_launcher.sh'), 'Resources/'),
        
        # Entitlements
        ('entitlements.plist', '.'),
    ],
    hiddenimports=[
        # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
        'aiohttp', 'rumps', 'pystray', 'pynput', 'sounddevice',
        'speech_recognition', 'pydub', 'numpy', 'PIL', 'yaml',
        'grpcio', 'grpcio_tools', 'protobuf',
        
        # PyObjC —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏
        'pyobjc', 'pyobjc_framework_Cocoa', 'pyobjc_framework_CoreAudio',
        'pyobjc_framework_CoreFoundation', 'pyobjc_framework_AVFoundation',
        'pyobjc_framework_Quartz', 'pyobjc_framework_ApplicationServices',
        'pyobjc_framework_SystemConfiguration',
        
        # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
        'asyncio', 'logging', 'threading', 'json', 'signal', 'typing',
        'dataclasses', 'urllib', 'socket', 'ssl', 'zipfile', 'tarfile',
        'tempfile', 'shutil', 'glob', 'fnmatch', 'pathlib', 'os', 'sys'
    ],
    hookspath=[str(client_dir)],
    hooksconfig={},
    runtime_hooks=[],
    excludes=[],
    win_no_prefer_redirects=False,
    win_private_assemblies=False,
    cipher=None,
    noarchive=False,
)

# –°–æ–∑–¥–∞–Ω–∏–µ PYZ –∞—Ä—Ö–∏–≤–∞
pyz = PYZ(a.pure, a.zipped_data, cipher=None)

# –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
exe = EXE(
    pyz,
    a.scripts,
    a.binaries,
    a.zipfiles,
    a.datas,
    [],
    name='Nexy',
    debug=False,
    bootloader_ignore_signals=False,
    strip=False,
    upx=True,
    upx_exclude=[],
    runtime_tmpdir=None,
    console=False,
    disable_windowed_traceback=False,
    argv_emulation=False,
    target_arch=None,
    codesign_identity=None,
    entitlements_file=None,
)

# –°–æ–∑–¥–∞–Ω–∏–µ .app bundle
app = BUNDLE(
    exe,
    name='Nexy.app',
    icon=str(assets_dir / 'icons' / 'app.icns'),
    bundle_identifier='com.sergiyzasorin.nexy.voiceassistant',
    info_plist=info_plist
)
```

### 2. Entitlements —Ñ–∞–π–ª
–§–∞–π–ª `client/entitlements.plist`:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è -->
    <key>com.apple.security.device.audio-input</key>
    <true/>
    <key>com.apple.security.device.camera</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
    <key>com.apple.security.automation.apple-events</key>
    <true/>
    
    <!-- –°–µ—Ç–µ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è -->
    <key>com.apple.security.network.client</key>
    <true/>
    <key>com.apple.security.network.server</key>
    <true/>
    
    <!-- JIT –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ -->
    <key>com.apple.security.cs.allow-jit</key>
    <true/>
    <key>com.apple.security.cs.allow-unsigned-executable-memory</key>
    <true/>
    <key>com.apple.security.cs.allow-dyld-environment-variables</key>
    <true/>
    <key>com.apple.security.cs.disable-library-validation</key>
    <true/>
    
    <!-- Bluetooth –¥–ª—è –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <key>com.apple.security.device.bluetooth</key>
    <true/>
    
    <!-- –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º -->
    <key>com.apple.security.device.usb</key>
    <true/>
</dict>
</plist>
```

---

## ü§ñ –°–û–ó–î–ê–ù–ò–ï –°–ö–†–ò–ü–¢–û–í –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–ò

### 1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
–§–∞–π–ª `client/build_complete.sh`:
```bash
#!/bin/bash
# –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ Nexy AI Voice Assistant

set -e

echo "üöÄ –ü–û–õ–ù–ê–Ø –°–ë–û–†–ö–ê NEXY AI VOICE ASSISTANT"
echo "========================================"

# –≠—Ç–∞–ø 1: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
echo ""
echo "üìã –≠–¢–ê–ü 1: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"
echo "-----------------------------------"
./verify_packaging.sh
echo "‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"

# –≠—Ç–∞–ø 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo ""
echo "üìã –≠–¢–ê–ü 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
echo "---------------------------------"
if ! command -v SwitchAudioSource &> /dev/null; then
    echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SwitchAudioSource..."
    brew install switchaudio-osx
else
    echo "‚úÖ SwitchAudioSource —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

if [ ! -d "/usr/local/lib/Sparkle.framework" ]; then
    echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Sparkle Framework..."
    brew install sparkle || echo "‚ö†Ô∏è Sparkle Framework –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
else
    echo "‚úÖ Sparkle Framework —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

# –≠—Ç–∞–ø 3: –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
echo ""
echo "üìã –≠–¢–ê–ü 3: –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
echo "----------------------------"
echo "üßπ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–±–æ—Ä–æ–∫..."
rm -rf build/ dist/

echo "üî® –°–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ PyInstaller..."
python3 -m PyInstaller nexy.spec --clean --noconfirm

if [ ! -d "dist/Nexy.app" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
    exit 1
fi
echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ"

# –≠—Ç–∞–ø 4: –ü–æ–¥–ø–∏—Å—å Sparkle Framework (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
echo ""
echo "üìã –≠–¢–ê–ü 4: –ü–æ–¥–ø–∏—Å—å Sparkle Framework"
echo "-----------------------------------"
./sign_sparkle.sh
echo "‚úÖ Sparkle Framework –ø–æ–¥–ø–∏—Å–∞–Ω"

# –≠—Ç–∞–ø 5: –°–æ–∑–¥–∞–Ω–∏–µ PKG
echo ""
echo "üìã –≠–¢–ê–ü 5: –°–æ–∑–¥–∞–Ω–∏–µ PKG —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞"
echo "-----------------------------------"
./create_pkg.sh

if [ ! -f "Nexy_AI_Voice_Assistant_v1.71.0.pkg" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è PKG"
    exit 1
fi
echo "‚úÖ PKG —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ"

# –≠—Ç–∞–ø 6: –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
echo ""
echo "üìã –≠–¢–ê–ü 6: –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è PKG"
echo "--------------------------"
./notarize.sh Nexy_AI_Voice_Assistant_v1.71.0.pkg
echo "‚úÖ PKG –Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ"

# –≠—Ç–∞–ø 7: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
echo ""
echo "üìã –≠–¢–ê–ü 7: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"
echo "-----------------------------"
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ PKG..."
codesign --verify --verbose Nexy_AI_Voice_Assistant_v1.71.0.pkg

echo "üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PKG:"
du -h Nexy_AI_Voice_Assistant_v1.71.0.pkg
pkgutil --check-signature Nexy_AI_Voice_Assistant_v1.71.0.pkg

echo ""
echo "üéâ –°–ë–û–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!"
echo "============================="
echo "üì¶ –ì–æ—Ç–æ–≤—ã–π PKG: Nexy_AI_Voice_Assistant_v1.71.0.pkg"
echo "üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: dist/Nexy.app"
echo ""
echo "üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ:"
echo "   ‚Ä¢ –í–µ—Ä—Å–∏—è: 1.71.0"
echo "   ‚Ä¢ Bundle ID: com.sergiyzasorin.nexy.voiceassistant"
echo "   ‚Ä¢ –ü–æ–¥–ø–∏—Å—å: Developer ID Application/Installer"
echo "   ‚Ä¢ –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è: ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ Apple"
echo "   ‚Ä¢ –†–∞–∑–º–µ—Ä: $(du -h Nexy_AI_Voice_Assistant_v1.71.0.pkg | cut -f1)"
echo ""
echo "üöÄ PKG –≥–æ—Ç–æ–≤ –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é!"
```

### 2. –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è PKG
–§–∞–π–ª `client/create_pkg.sh`:
```bash
#!/bin/bash
set -e

APP_NAME="Nexy"
APP_VERSION="1.71.0"
PKG_NAME="Nexy_AI_Voice_Assistant_v${APP_VERSION}.pkg"
BUNDLE_ID="com.sergiyzasorin.nexy.voiceassistant"
DEVELOPER_ID_APP="Developer ID Application: Sergiy Zasorin (5NKLL2CLB9)"
DEVELOPER_ID_INSTALLER="Developer ID Installer: Sergiy Zasorin (5NKLL2CLB9)"

echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ PKG —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞..."

# –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
TEMP_DIR=$(mktemp -d)
PKG_ROOT="$TEMP_DIR/pkgroot"
APP_DIR="$PKG_ROOT/Applications"
LAUNCH_AGENTS_DIR="$PKG_ROOT/Library/LaunchAgents"

mkdir -p "$APP_DIR"
mkdir -p "$LAUNCH_AGENTS_DIR"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cp -R "dist/Nexy.app" "$APP_DIR/"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ LaunchAgent —Ñ–∞–π–ª–æ–≤
if [ -f "pkg_root/Library/LaunchAgents/com.sergiyzasorin.nexy.voiceassistant.plist" ]; then
    cp "pkg_root/Library/LaunchAgents/com.sergiyzasorin.nexy.voiceassistant.plist" "$LAUNCH_AGENTS_DIR/"
    echo "‚úÖ LaunchAgent plist —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
fi

if [ -f "pkg_root/Library/LaunchAgents/nexy_launcher.sh" ]; then
    cp "pkg_root/Library/LaunchAgents/nexy_launcher.sh" "$LAUNCH_AGENTS_DIR/"
    chmod +x "$LAUNCH_AGENTS_DIR/nexy_launcher.sh"
    echo "‚úÖ LaunchAgent —Å–∫—Ä–∏–ø—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
fi

# –û—á–∏—Å—Ç–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
xattr -cr "$APP_DIR/Nexy.app"

# –ö–æ–¥-–ø–æ–¥–ø–∏—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
echo "üîê –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
if codesign --force --verify --verbose --sign "$DEVELOPER_ID_APP" \
    --options runtime \
    --entitlements entitlements.plist \
    "$APP_DIR/Nexy.app"; then
    echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
    exit 1
fi

# –°–æ–∑–¥–∞–Ω–∏–µ PKG
echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ PKG..."
if pkgbuild --root "$PKG_ROOT" \
    --identifier "$BUNDLE_ID" \
    --version "$APP_VERSION" \
    --install-location "/" \
    --sign "$DEVELOPER_ID_INSTALLER" \
    "$PKG_NAME"; then
    echo "‚úÖ PKG —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è PKG"
    exit 1
fi

# –û—á–∏—Å—Ç–∫–∞
rm -rf "$TEMP_DIR"

echo "‚úÖ PKG —Å–æ–∑–¥–∞–Ω: $PKG_NAME"
echo "‚ÑπÔ∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: brew install switchaudio-osx sparkle"
```

### 3. –°–∫—Ä–∏–ø—Ç –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
–§–∞–π–ª `client/notarize.sh`:
```bash
#!/bin/bash
set -e

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
source "$(dirname "$0")/notarize_config.sh"

PKG_NAME="$1"

if [ -z "$PKG_NAME" ]; then
    echo "‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./notarize.sh <PKG_NAME>"
    exit 1
fi

echo "üîê –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è PKG: $PKG_NAME"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
if [ ! -f "$PKG_NAME" ]; then
    echo "‚ùå PKG —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: $PKG_NAME"
    exit 1
fi

# –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é
echo "üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é Apple..."
if xcrun notarytool submit "$PKG_NAME" \
    --apple-id "$APPLE_ID" \
    --password "$APP_PASSWORD" \
    --team-id "$TEAM_ID" \
    --wait; then
    echo "‚úÖ –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏"
    exit 1
fi

# –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
echo "üìé –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞..."
if xcrun stapler staple "$PKG_NAME"; then
    echo "‚úÖ –¢–∏–∫–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞"
    exit 1
fi

echo "‚úÖ PKG –Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é!"
```

### 4. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
–§–∞–π–ª `client/verify_packaging.sh`:
```bash
#!/bin/bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —É–ø–∞–∫–æ–≤–∫–µ Nexy AI Voice Assistant

set -e

echo "üîç –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —É–ø–∞–∫–æ–≤–∫–µ Nexy AI Voice Assistant"
echo "=================================================================="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
echo ""
echo "üì± –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤..."
if security find-identity -v -p codesigning | grep -q "Developer ID Application"; then
    echo "‚úÖ Developer ID Application –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ùå Developer ID Application –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

if security find-identity -v -p codesigning | grep -q "Developer ID Installer"; then
    echo "‚úÖ Developer ID Installer –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ùå Developer ID Installer –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo ""
echo "üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
if command -v SwitchAudioSource &> /dev/null; then
    echo "‚úÖ SwitchAudioSource –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ö†Ô∏è SwitchAudioSource –Ω–µ –Ω–∞–π–¥–µ–Ω (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: brew install switchaudio-osx)"
fi

if [ -d "/usr/local/lib/Sparkle.framework" ]; then
    echo "‚úÖ Sparkle Framework –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ö†Ô∏è Sparkle Framework –Ω–µ –Ω–∞–π–¥–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo ""
echo "üêç –ü—Ä–æ–≤–µ—Ä–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
MISSING_MODULES=()
REQUIRED_MODULES=("grpcio" "aiohttp" "rumps" "pystray" "pynput" "sounddevice" "speech_recognition" "pydub" "numpy" "PIL" "yaml")

for module in "${REQUIRED_MODULES[@]}"; do
    if python3 -c "import $module" 2>/dev/null; then
        echo "‚úÖ $module –Ω–∞–π–¥–µ–Ω"
    else
        echo "‚ùå $module –Ω–µ –Ω–∞–π–¥–µ–Ω"
        MISSING_MODULES+=("$module")
    fi
done

if [ ${#MISSING_MODULES[@]} -gt 0 ]; then
    echo "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –º–æ–¥—É–ª–∏: ${MISSING_MODULES[*]}"
    echo "üí° –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: pip3 install -r requirements.txt"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
echo ""
echo "üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
REQUIRED_FILES=("nexy.spec" "entitlements.plist" "notarize_config.sh" "create_pkg.sh" "notarize.sh" "sign_sparkle.sh")

for file in "${REQUIRED_FILES[@]}"; do
    if [ -f "$file" ]; then
        echo "‚úÖ $file –Ω–∞–π–¥–µ–Ω"
    else
        echo "‚ùå $file –Ω–µ –Ω–∞–π–¥–µ–Ω"
        exit 1
    fi
done

# –ü—Ä–æ–≤–µ—Ä–∫–∞ FLAC –≤ Speech Recognition
echo ""
echo "üéµ –ü—Ä–æ–≤–µ—Ä–∫–∞ FLAC –≤ Speech Recognition..."
FLAC_VERSION=$(python3 -c "import speech_recognition; print(speech_recognition.__version__)" 2>/dev/null || echo "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")
echo "‚ÑπÔ∏è Speech Recognition –≤–µ—Ä—Å–∏—è: $FLAC_VERSION"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
echo ""
echo "üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏..."
if [ -f "notarize_config.sh" ]; then
    source notarize_config.sh
    echo "üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏:"
    echo "   Apple ID: $APPLE_ID"
    echo "   Team ID: $TEAM_ID"
    echo "   Bundle ID: $BUNDLE_ID"
    echo "   App Password: ${APP_PASSWORD:0:4}****"
else
    echo "‚ùå notarize_config.sh –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Apple
echo ""
echo "üçé –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Apple..."
if xcrun notarytool history \
    --apple-id "$APPLE_ID" \
    --password "$APP_PASSWORD" \
    --team-id "$TEAM_ID" &>/dev/null; then
    echo "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Apple —Ä–∞–±–æ—Ç–∞–µ—Ç"
else
    echo "‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Apple"
    exit 1
fi

echo ""
echo "üéâ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!"
echo "üöÄ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —É–ø–∞–∫–æ–≤–∫–µ: ./build_complete.sh"
```

---

## üöÄ –ü–†–û–¶–ï–°–° –£–ü–ê–ö–û–í–ö–ò

### 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
cd client/
chmod +x *.sh
./build_complete.sh
```

### 2. –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å

#### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞
cd client/

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x *.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
./verify_packaging.sh
```

#### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–±–æ—Ä–æ–∫
rm -rf build/ dist/

# –°–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ PyInstaller
python3 -m PyInstaller nexy.spec --clean --noconfirm
```

#### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ PKG
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ PKG —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
./create_pkg.sh
```

#### –®–∞–≥ 4: –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é Apple
./notarize.sh Nexy_AI_Voice_Assistant_v1.71.0.pkg
```

### 3. –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
```bash
# –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
./rebuild_and_notarize.sh
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ PKG
pkgutil --check-signature Nexy_AI_Voice_Assistant_v1.71.0.pkg

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ .app bundle
codesign --verify --verbose dist/Nexy.app
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞
xcrun stapler validate Nexy_AI_Voice_Assistant_v1.71.0.pkg

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Gatekeeper
spctl --assess --verbose Nexy_AI_Voice_Assistant_v1.71.0.pkg
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PKG
sudo installer -pkg Nexy_AI_Voice_Assistant_v1.71.0.pkg -target /

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
ls -la /Applications/Nexy.app
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
open /Applications/Nexy.app

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ç—Ä–µ–µ
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
```

---

## üì§ –†–ê–°–ü–†–û–°–¢–†–ê–ù–ï–ù–ò–ï

### 1. –ì–æ—Ç–æ–≤—ã–π PKG
- **–§–∞–π–ª:** `Nexy_AI_Voice_Assistant_v1.71.0.pkg`
- **–†–∞–∑–º–µ—Ä:** ~59MB
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–¥–ø–∏—Å–∞–Ω –∏ –Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** macOS 10.15+

### 2. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
brew install switchaudio-osx

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
brew install sparkle
```

### 3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. –°–∫–∞—á–∞—Ç—å PKG —Ñ–∞–π–ª
2. –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω—É—Ç—å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
3. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
4. –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ç—Ä–µ–µ

---

## üîß –£–°–¢–†–ê–ù–ï–ù–ò–ï –ù–ï–ü–û–õ–ê–î–û–ö

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
```
error: file with invalid attached data: Disallowed xattr com.apple.FinderInfo
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
xattr -cr dist/Nexy.app
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
```
Error: HTTP status code: 401. Invalid credentials
```
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Apple ID –≤ `notarize_config.sh`
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π App-Specific Password
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Team ID

### –ü—Ä–æ–±–ª–µ–º–∞: PyInstaller –Ω–µ –Ω–∞–π–¥–µ–Ω
```
zsh: command not found: pyinstaller
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å python3 -m PyInstaller
python3 -m PyInstaller nexy.spec --clean --noconfirm
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
ModuleNotFoundError: No module named 'grpcio'
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install -r requirements.txt
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏
```
ERROR: Hidden import 'grpcio' not found
```
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –º–æ–¥—É–ª—è: `pip3 install grpcio`
2. –û–±–Ω–æ–≤–∏—Ç—å `hiddenimports` –≤ `nexy.spec`

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
security find-identity -v -p codesigning

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Ñ–∞–π–ª–∞
codesign --verify --verbose file.app

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
xcrun stapler validate file.pkg

# –û—á–∏—Å—Ç–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
xattr -cr file.app

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PKG
pkgutil --check-signature file.pkg
```

### –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- [Apple Code Signing Guide](https://developer.apple.com/library/archive/documentation/Security/Conceptual/CodeSigningGuide/)
- [Apple Notarization Guide](https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution)
- [PyInstaller Documentation](https://pyinstaller.readthedocs.io/)
- [macOS App Store Guidelines](https://developer.apple.com/app-store/review/guidelines/)

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ì–û–¢–û–í–ù–û–°–¢–ò

### –ü–µ—Ä–µ–¥ —É–ø–∞–∫–æ–≤–∫–æ–π
- [ ] Apple Developer Account –∞–∫—Ç–∏–≤–µ–Ω
- [ ] –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Keychain
- [ ] App-Specific Password —Å–æ–∑–¥–∞–Ω
- [ ] `notarize_config.sh` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] `nexy.spec` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] `entitlements.plist` —Å–æ–∑–¥–∞–Ω

### –ü–æ—Å–ª–µ —É–ø–∞–∫–æ–≤–∫–∏
- [ ] .app bundle —Å–æ–∑–¥–∞–Ω
- [ ] .app bundle –ø–æ–¥–ø–∏—Å–∞–Ω
- [ ] PKG —Å–æ–∑–¥–∞–Ω
- [ ] PKG –ø–æ–¥–ø–∏—Å–∞–Ω
- [ ] PKG –Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω
- [ ] –¢–∏–∫–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

### –ü–µ—Ä–µ–¥ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º
- [ ] PKG –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —á–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–æ—Ç–æ–≤–∞

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–≠—Ç–æ—Ç –ø–ª–∞–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞ —É–ø–∞–∫–æ–≤–∫–∏, –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ macOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Nexy AI Voice Assistant. –°–ª–µ–¥—É—è —ç—Ç–æ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É, –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π PKG —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫, –≥–æ—Ç–æ–≤—ã–π –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Apple
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —á–µ–∫–ª–∏—Å—Ç—ã

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~15-20 –º–∏–Ω—É—Ç (–≤–∫–ª—é—á–∞—è –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é)
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–æ—Ç–æ–≤—ã–π –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é PKG —Ñ–∞–π–ª