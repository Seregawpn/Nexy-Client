# üöÄ **–†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Æ –î–û 100 –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô**

## üìä **–í–ù–ï–°–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø**

### **‚úÖ 1. –û–ë–ù–û–í–õ–ï–ù–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø gRPC**

#### **–§–∞–π–ª: `server/config/unified_config_example.yaml`**
```yaml
grpc:
  max_workers: 100          # –ë—ã–ª–æ: 10 (x10 —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)
  port: 50051

interrupt:
  max_active_sessions: 100  # –ë—ã–ª–æ: 50 (x2 —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)

session:
  max_sessions: 200         # –ë—ã–ª–æ: 100 (x2 —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)

text_processing:
  max_concurrent_requests: 50  # –ë—ã–ª–æ: 10 (x5 —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)

memory:
  max_long_term_memory_size: 102400   # –ë—ã–ª–æ: 10240 (x10 —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)
  max_short_term_memory_size: 51200   # –ë—ã–ª–æ: 10240 (x5 —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)

# –ù–æ–≤—ã–µ –∑–∞—â–∏—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã
protection:
  max_requests_per_minute: 1000
  max_requests_per_user: 10
  circuit_breaker_threshold: 5
  max_memory_usage: 80
```

### **‚úÖ 2. –û–ë–ù–û–í–õ–ï–ù–´ –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø**

#### **–§–∞–π–ª: `server/config.env`**
```bash
# Performance - –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
MAX_WORKERS=100
MAX_CONCURRENT_REQUESTS=50
MAX_SESSIONS=200
MAX_ACTIVE_SESSIONS=100
MAX_REQUESTS_PER_MINUTE=1000
MAX_REQUESTS_PER_USER=10
CIRCUIT_BREAKER_THRESHOLD=5
MAX_MEMORY_USAGE=80

# Memory limits
MAX_SHORT_TERM_MEMORY_SIZE=51200
MAX_LONG_TERM_MEMORY_SIZE=102400
```

### **‚úÖ 3. –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù gRPC –°–ï–†–í–ï–†**

#### **–§–∞–π–ª: `server/grpc_server.py`**
- **–£–≤–µ–ª–∏—á–µ–Ω—ã –≤–æ—Ä–∫–µ—Ä—ã:** —Å 10 –¥–æ 100
- **–î–æ–±–∞–≤–ª–µ–Ω connection pooling** —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **Keep-alive –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** 30 —Å–µ–∫—É–Ω–¥
- **–ë—É—Ñ–µ—Ä—ã:** —É–≤–µ–ª–∏—á–µ–Ω—ã –¥–æ 4MB
- **–¢–∞–π–º–∞—É—Ç—ã:** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

```python
# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ThreadPoolExecutor
executor = ThreadPoolExecutor(
    max_workers=max_workers,  # 100 –≤–æ—Ä–∫–µ—Ä–æ–≤
    thread_name_prefix="grpc-worker"
)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
options = [
    ('grpc.keepalive_time_ms', 30000),
    ('grpc.keepalive_timeout_ms', 5000),
    ('grpc.max_receive_message_length', 4 * 1024 * 1024),  # 4MB
    ('grpc.max_send_message_length', 4 * 1024 * 1024),     # 4MB
    ('grpc.client_idle_timeout_ms', 300000),  # 5 –º–∏–Ω—É—Ç
]
```

### **‚úÖ 4. –î–û–ë–ê–í–õ–ï–ù –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò**

#### **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `server/monitoring/grpc_monitor.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–Ω–∏—Ç–æ—Ä
- `server/monitoring/__init__.py` - —ç–∫—Å–ø–æ—Ä—Ç—ã

#### **–§—É–Ω–∫—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**
- **–ú–µ—Ç—Ä–∏–∫–∏ RPS (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)**
- **–ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫**
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤**

### **‚úÖ 5. –°–û–ó–î–ê–ù –°–ö–†–ò–ü–¢ –ù–ê–ì–†–£–ó–û–ß–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

#### **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `server/load_testing/load_test.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `server/load_testing/run_load_test.sh` - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- `server/load_testing/__init__.py` - —ç–∫—Å–ø–æ—Ä—Ç—ã

#### **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- **–ò–∑–º–µ—Ä–µ–Ω–∏–µ RPS –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞**
- **–ê–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**

---

## üöÄ **–ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

### **1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:**
```bash
cd server
python main.py
```

### **2. –ó–∞–ø—É—Å–∫ –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞:**
```bash
cd server
python -m load_testing.load_test --quick
```

### **3. –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
```bash
cd server
python -m load_testing.load_test --users 100
```

### **4. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:**
```bash
cd server
./load_testing/run_load_test.sh
```

---

## üìä **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **‚úÖ –£–°–ü–ï–®–ù–û–ï –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï:**
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤:** ‚â•95%
- **RPS:** ‚â•50 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** ‚â§2 —Å–µ–∫—É–Ω–¥—ã
- **–ü–∞–º—è—Ç—å:** ‚â§80% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **CPU:** ‚â§80% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **‚ö†Ô∏è –ü–†–ò–ó–ù–ê–ö–ò –ü–†–û–ë–õ–ï–ú:**
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å <95%** - –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç—ã
- **RPS <30** - —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ >5 —Å–µ–∫** - –º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ü–∞–º—è—Ç—å >90%** - –Ω–µ—Ö–≤–∞—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- **CPU >90%** - –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

---

## üîß **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò**

### **1. API –õ–ò–ú–ò–¢–´:**
- **Gemini API:** –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (Pay-as-you-go)
- **Azure Speech:** –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Standard –ø–ª–∞–Ω
- **–û–∂–∏–¥–∞–µ–º—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã:** $50-100/–º–µ—Å—è—Ü

### **2. –ú–û–ù–ò–¢–û–†–ò–ù–ì –í –ü–†–û–î–ê–ö–®–ï–ù–ï:**
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
from monitoring import get_metrics, get_status

metrics = get_metrics()
status = get_status()

print(f"–°—Ç–∞—Ç—É—Å: {status}")
print(f"–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: {metrics['active_connections']}")
print(f"RPS: {metrics['requests_per_minute']}")
print(f"–û—à–∏–±–∫–∏: {metrics['error_rate']:.1%}")
```

### **3. –ù–ê–°–¢–†–û–ô–ö–ê –ê–õ–ï–†–¢–û–í:**
- **CPU >80%** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- **–ü–∞–º—è—Ç—å >80%** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ  
- **–û—à–∏–±–∫–∏ >5%** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ
- **RPS >800** - –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

---

## ‚ùì **–ß–ê–°–¢–û –ó–ê–î–ê–í–ê–ï–ú–´–ï –í–û–ü–†–û–°–´**

### **Q: –ù—É–∂–Ω–æ –ª–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã –µ—â–µ –±–æ–ª—å—à–µ?**
**A:** –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã. –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –Ω–∞ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### **Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç?**
**A:** 
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –ª–∏–º–∏—Ç—ã (Gemini, Azure Speech)
2. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞
3. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### **Q: –ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ?**
**A:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```python
from monitoring import get_metrics
metrics = get_metrics()
```

### **Q: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã?**
**A:** –î–∞, –Ω–æ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º. –õ–∏–º–∏—Ç—ã –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –∏ DDoS.

---

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∏ –≤—ã—è–≤–∏—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞
3. **–û–±–Ω–æ–≤–∏—Ç—å API –ø–ª–∞–Ω—ã** –Ω–∞ –ø–ª–∞—Ç–Ω—ã–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
5. **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üìû **–ü–û–î–î–ï–†–ñ–ö–ê**

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –ª–∏–º–∏—Ç—ã
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π

**–ì–æ—Ç–æ–≤–æ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –¥–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π! üöÄ**
